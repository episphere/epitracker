<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticky Within Container - Attempt 2</title>
    <style>
        /* Basic body/html setup */
        html {
            box-sizing: border-box;
            scroll-behavior: smooth;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            margin: 0;
            font-family: sans-serif;
            line-height: 1.6;
            /* CRITICAL CHECK: Ensure body/html do NOT have overflow: hidden/scroll/auto */
        }

        /* Header Styling */
        .site-header {
            background-color: #f1f1f1;
            padding: 10px 20px;
            height: 60px;
            border-bottom: 1px solid #ccc;
            display: flex;
            align-items: center;
        }

        /* Main Layout using Flexbox */
        .main-container {
            display: flex;
            /* align-items: flex-start; */ /* REMOVED: Let items stretch vertically by default */
            padding: 20px 0;
            max-width: 1200px;
            margin: 0 auto;
            border: 2px solid red; /* DEBUG: Visualize main container */
             /* CRITICAL CHECK: Ensure this container does NOT have overflow: hidden/scroll/auto */
        }

        /* Side Panel (Scrollable Content Source) */
        .side-panel {
            width: 30%;
            padding: 0 20px;
            background-color: #f0f0f0;
            border: 1px solid #ccc; /* DEBUG: Visualize side panel */
        }

        /* Plot Area Wrapper (Defines the boundary for sticky) */
        .plot-area-container {
            width: 70%;
            padding: 0 20px;
            border: 2px dashed green; /* DEBUG: Visualize plot wrapper */
             /* CRITICAL CHECK: Ensure this container does NOT have overflow: hidden/scroll/auto */
             /* This container MUST become taller than the sticky plot panel for sticky to work */
        }

        /* Plot Panel (The Sticky Element) */
        .plot-panel {
            /* --- Sticky Positioning --- */
            position: sticky;
            top: 20px; /* Stick 20px from the viewport top (adjust if header is fixed/sticky) */

            /* --- Sizing & Appearance --- */
            width: 100%;
            height: 85vh; /* Height needs to be less than the eventual height of plot-area-container */
            overflow-y: auto;
            background-color: #e0e8ff;
            border: 2px solid blue; /* DEBUG: Visualize plot panel */
            padding: 15px;
            z-index: 10;
        }

        /* Footer Styling */
        .site-footer {
            margin-top: 20px;
            background-color: #f1f1f1;
            padding: 30px 20px;
            border-top: 1px solid #ccc;
            min-height: 100px;
            text-align: center;
        }

        /* Example Content Styling */
        .plot-content {
            background: white;
            border: 1px solid #ccc;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-top: 15px;
        }

        h1, h2, h3 {
          margin-top: 0;
        }

        .side-panel p {
          margin-bottom: 1em;
          background-color: #fafafa;
          padding: 8px;
          border: 1px solid #eee;
          min-height: 30px; /* Ensure paragraphs add significant height */
        }
    </style>
</head>
<body>

  <header class="site-header">
    <h1>Website Header</h1>
  </header>

  <div class="main-container">

    <aside class="side-panel">
      <h2>Side Panel Controls</h2>
      <p>This panel needs extreme height.</p>
      <p>Item 1</p><p>Item 2</p><p>Item 3</p><p>Item 4</p><p>Item 5</p>
      <p>Item 6</p><p>Item 7</p><p>Item 8</p><p>Item 9</p><p>Item 10</p>
      <p>Item 11</p><p>Item 12</p><p>Item 13</p><p>Item 14</p><p>Item 15</p>
      <p>Item 16</p><p>Item 17</p><p>Item 18</p><p>Item 19</p><p>Item 20</p>
      <p>Item 21</p><p>Item 22</p><p>Item 23</p><p>Item 24</p><p>Item 25</p>
      <p>Item 26</p><p>Item 27</p><p>Item 28</p><p>Item 29</p><p>Item 30</p>
      <p>Item 31</p><p>Item 32</p><p>Item 33</p><p>Item 34</p><p>Item 35</p>
      <p>Item 36</p><p>Item 37</p><p>Item 38</p><p>Item 39</p><p>Item 40</p>
      <p>Item 41</p><p>Item 42</p><p>Item 43</p><p>Item 44</p><p>Item 45</p>
      <p>Item 46</p><p>Item 47</p><p>Item 48</p><p>Item 49</p><p>Item 50</p>
      <p>Item 51</p><p>Item 52</p><p>Item 53</p><p>Item 54</p><p>Item 55</p>
      <p>Item 56</p><p>Item 57</p><p>Item 58</p><p>Item 59</p><p>Item 60</p>
      <p>Item 61</p><p>Item 62</p><p>Item 63</p><p>Item 64</p><p>Item 65</p>
      <p>Item 66</p><p>Item 67</p><p>Item 68</p><p>Item 69</p><p>Item 70</p>
      <p>Item 71</p><p>Item 72</p><p>Item 73</p><p>Item 74</p><p>Item 75</p>
      <p>Item 76</p><p>Item 77</p><p>Item 78</p><p>Item 79</p><p>Item 80</p>
      <p>End of Side Panel Content.</p>
    </aside>

    <div class="plot-area-container"> 
      <main class="plot-panel"> 
        <h2>Plot Area (Sticky Attempt 2)</h2>
        <p>This blue box should stick at <code>top: 20px;</code> while scrolling.</p>
        <p>It should stop sticking when its bottom edge reaches the bottom of its green dashed container.</p>
        <!-- <div class="plot-content">
          Plot Visualization Area
        </div>
        <p>Scroll down the page past all the side panel content to see if it stops before the footer.</p> -->
      </main>
    </div>

  </div> <footer class="site-footer">
    <p>Website Footer</p>
  </footer>

</body>
</html>